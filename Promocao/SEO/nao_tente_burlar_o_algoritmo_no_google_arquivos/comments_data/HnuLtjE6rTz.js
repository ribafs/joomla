/*1352104831,173213983*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ILBaE"]); }

var StreamShareVideo={_endpoints:[],_thumbs:[],registerThumb:function(a,b,c,d){StreamShareVideo._endpoints[a+' '+c]=d;StreamShareVideo._thumbs[a+' '+c]=b;},clickTitle:function(a,b,event){return this.expandInlineOrRedirect(a,b,event);},expandInlineOrRedirect:function(a,b,event){if(StreamShareVideo._shouldFollowHref(event))return true;var c=StreamShareVideo._thumbs[a+' '+b],d=ge(c);if(d){CSS.addClass(d,"uiVideoThumbLoading");AsyncRequest.bootstrap(StreamShareVideo._endpoints[a+' '+b],d.parentElement);return false;}return true;},clickTimeline:function(a,b,event){if(StreamShareVideo._shouldFollowHref(event))return true;CSS.addClass(a,"_1xu");CSS.removeClass(a,"_1xv");AsyncRequest.bootstrap(b,a);return false;},_shouldFollowHref:function(event){event=$E(event);if(!event)return false;if(event.getModifiers().any||event.isMiddleClick())return true;return false;}};
__d("MentionsInputMatchers",[],function(a,b,c,d,e,f){var g=['@','\\uff20','+','\\uff0b'].join(''),h='.,*?$|#{}()\\^\\-\\[\\]\\\\\/!%&\'"~=<>_:;',i='\\b[A-Z][^ A-Z'+h+']',j='([^'+g+h+']|['+h+'][^ '+h+'])',k='(?:^|\\s)(?:['+g+']('+j+'{0,20}))',l='(?:(?:'+i+'+)|'+k+')',m='(?:'+i+'{4,})',n={trigger:new RegExp('['+g+']$'),mainMatcher:new RegExp(k+'$'),autoMatcher:new RegExp(l+'$'),userMatcher:new RegExp(m+'$')};e.exports=n;});
__d("MentionsInput",["event-extensions","function-extensions","Arbiter","ArbiterMixin","Class","CSS","DataStore","DOM","HTML","Input","InputSelection","Parent","htmlize","Style","Typeahead","TypeaheadUtil","UserAgent","copyProperties","MentionsInputMatchers"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('HTML'),n=b('Input'),o=b('InputSelection'),p=b('Parent'),q=b('htmlize'),r=b('Style'),s=b('Typeahead'),t=b('TypeaheadUtil'),u=b('UserAgent'),v=b('copyProperties'),w=b('MentionsInputMatchers');function x(y,z,aa,ba,ca,da){k.set(y,'MentionsInput',this);this._root=y;this._typeahead=z;this._input=aa;var ea=false;try{ea=document.activeElement===this._input;}catch(fa){}var ga=this.init.bind(this,ba,ca,da);if(ea){ga.defer();}else var ha=Event.listen(this._input,'focus',function(){ga.defer();ha.remove();});}x.getInstance=function(y){var z=p.byClass(y,'uiMentionsInput');return z?k.get(z,'MentionsInput'):null;};v(x.prototype,h,{init:function(y,z,aa){if(this._initialized)return;this._initialized=true;this._highlighter=l.find(this._root,'.highlighter');this._highlighterInner=this._highlighter.firstChild;this._highlighterContent=l.find(this._root,'.highlighterContent');this._hiddenInput=l.find(this._root,'.mentionsHidden');this._placeholder=this._input.getAttribute('placeholder')||'';this._maxMentions=y.max||6;this._metrics=aa;if(u.firefox()<4){this._input.blur();setTimeout(function(){this._input.focus();}.bind(this));}if(!this._hiddenInput.name){var ba=this._input.name;this._input.name=ba+'_text';this._hiddenInput.name=ba;}this._initEvents();this._initTypeahead();this.reset(z);this.inform('init',null,g.BEHAVIOR_STATE);},reset:function(y){if(!this._initialized)return;this._mentioned={};this._orderedUIDs=[];this._numMentioned=0;this._filterData=null;this._hiddenInput&&(this._hiddenInput.value='');this._highlighterContent&&l.empty(this._highlighterContent);this._highlighterAuxContent&&l.remove(this._highlighterAuxContent);this._highlighterAuxContent=null;n.setPlaceholder(this._input,this._placeholder);r.set(this._typeahead.getElement(),'height','auto');if(y){n.setValue(this._input,y.flattened);for(var z in y.mention_data)this._addToken({uid:z,text:y.mention_data[z],type:'unknown'});}this._updateTypeahead();this._updateWidth();this._update();},getValue:function(){return n.getValue(this._input);},getRawValue:function(){this._update();return n.getValue(this._hiddenInput);},checkValue:function(){var y=this._typeahead.getCore().getValue();if(w.trigger.exec(y)||y==='')this.inform('sessionEnd',{});},getTypeahead:function(){return this._typeahead;},_initEvents:function(){var y=this._update.bind(this);Event.listen(this._input,{input:y,keyup:y,change:y,blur:this._handleBlur.bind(this),focus:this._handleFocus.bind(this)});if(this._metrics){this._metrics._reset();this._metrics.bindSessionStart(this._typeahead,'render',true);this._metrics.bindSessionEnd(this._typeahead.getView(),'select',true);this._metrics.bindSessionEnd(this,'sessionEnd',false);Event.listen(this._input,'keyup',function(event){this.checkValue.bind(this).defer();}.bind(this));}},_initTypeahead:function(){this._typeahead.subscribe('select',function(ca,da){var ea=da.selected;this._addToken({uid:ea.uid,text:ea.text,type:ea.type});this.updateValue();}.bind(this));var y=this._input,z=null,aa=function(){if(z===null){z=n.getSubmitOnEnter(y);n.setSubmitOnEnter(y,false);}},ba=function(){if(z!==null){n.setSubmitOnEnter(y,z);z=null;}};this._typeahead.subscribe('render',aa);this._typeahead.subscribe('reset',ba);this._typeahead.subscribe('highlight',function(ca,da){da.index>=0?aa():ba();});this._typeahead.subscribe('query',function(){this._filterData=null;}.bind(this));this._typeahead.getCore().suffix='';this._handleFocus();},_handleBlur:function(){if(this._filterToken){this._filterToken.remove();this._filterToken=null;}},_handleFocus:function(){if(!this._filterToken)this._filterToken=this._typeahead.getData().addFilter(this._filterResults.bind(this));this._updateWidth();},_filterResults:function(y){if(this._filterData===null){var z=o.get(this._input).start||0;for(var aa=0;aa<this._offsets.length;aa++){var ba=this._offsets[aa];if(z>ba[0]&&z<=ba[1]){this._filterData={caretIsInsideMention:true};return false;}}var ca=this._typeahead.getCore();this._filterData={value:ca.getValue(),rawValue:ca.getRawValue()};}if(this._filterData.caretIsInsideMention)return false;if(w.mainMatcher.test(this._filterData.rawValue))return true;if(y.type!='user')return false;if(w.userMatcher.test(this._filterData.value))return true;return t.isExactMatch(this._filterData.value,this._typeahead.getData().getTextToIndex(y));},_addToken:function(y){var z=y.uid;if(!this._mentioned.hasOwnProperty(z)){this._mentioned[z]=y;this._orderedUIDs.push(z);this._numMentioned++;this._updateTypeahead();}},_removeToken:function(y){if(this._mentioned.hasOwnProperty(y)){delete this._mentioned[y];this._orderedUIDs.remove(y);this._numMentioned--;this._updateTypeahead();}},_reduceToken:function(y,z){var aa=z.split(' '),ba=[];for(var ca=0;ca<aa.length;ca++)if(y.indexOf(aa[ca])!=-1)ba.push(aa[ca]);aa=ba;for(ca=1;ca<aa.length;ca++)for(var da=1;da<aa[ca-1].length+1;da++)if(y.indexOf(aa[ca-1].substr(0,da)+aa[ca])!=-1)aa.splice(ca-1,1);while(y.indexOf(aa.join(' '))==-1)aa.splice(0,1);return aa.join(' ');},_update:function(){var y=this.getValue();if(y==this._value)return;this._updateTokens();this.updateValue();this._updateDirection();},_updateTokens:function(){var y=this.getValue(),z=false;for(var aa=0;aa<this._orderedUIDs.length;++aa){var ba=this._orderedUIDs[aa],ca=this._mentioned[ba],da=ca.text,ea;if(ca.type=='user'&&(ea=this._reduceToken(y,da))!==''){if(ea==da.substring(0,da.lastIndexOf(' '))&&y==this._value.substring(0,this._value.length-1)){y=y.substring(0,y.lastIndexOf(' '));z=true;}ca.text=ea;}else if(!da||y.indexOf(da)==-1||typeof da!=='string')this._removeToken(ba);}this._value=y;if(z)n.setValue(this._input,y);},updateValue:function(){var y=this.getValue(),z=this._orderedUIDs,aa=[],ba,ca,da,ea;for(ea=0;ea<z.length;++ea){ca=this._mentioned[z[ea]].text;y=y.replace(ca,function(fa,ga){aa.push([ga,ga+ca.length]);return ca;});}for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;y=y.replace(ca,'@['+da+':]');}ba=q(y);for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;ba=ba.replace('@['+da+':]','<b>'+q(ca)+'</b>');ca=ca.replace(/[\\\]:]/g,function(fa){return '\\'+fa;});y=y.replace('@['+da+':]','@['+da+':'+ca+']');}if(u.ie()){ba=ba.replace(/ {2}/g,'&nbsp;<wbr />&nbsp;<wbr />');ba=ba.replace(/ (?=[^\/]|\/[^>])/g,'&nbsp;<wbr />');}this._offsets=aa;this._hiddenInput.value=y;l.setContent(this._highlighterContent,m(ba));this._updateHighlighter();this._updateHeight();},_updateDirection:function(){var y=r.get(this._input,'direction');if(y==this._dir)return;this._dir=y;r.set(this._highlighter,'direction',y);if(y=='rtl'){r.set(this._highlighter,'text-align','right');}else r.set(this._highlighter,'text-align','left');},_updateWidth:function(){var y=r.getFloat.curry(this._input),z=this._input.offsetWidth-y('paddingLeft')-y('paddingRight')-y('borderLeftWidth')-y('borderRightWidth');if(u.firefox())z-=2;if(u.ie()<=7){z-=r.getFloat(this._highlighterInner,'paddingLeft');this._highlighter.style.zoom=1;}this._highlighterInner.style.width=Math.max(z,0)+'px';},_updateHeight:function(){if(this._highlighterAuxContent){var y=this._highlighter.offsetHeight,z=this._typeahead.getElement();if(y>z.offsetHeight){r.set(z,'height',y+'px');g.inform('reflow');}}},_updateTypeahead:function(){var y=this._typeahead.getCore(),z=null;if(!this._maxMentions||this._numMentioned<this._maxMentions)z=w.autoMatcher;y.matcher=z;y.setExclusions(this._orderedUIDs);this.inform('update',{mentioned:this._mentioned});},setPlaceholder:function(y){this._placeholder=y;if(!this.hasAuxContent())n.setPlaceholder(this._input,y);},_updateHighlighter:function(){if(this._highlighterContent)j.conditionShow(this._highlighterContent,this._numMentioned>0||this.hasAuxContent());},setAuxContent:function(y){if(this._highlighterContent){if(!this._highlighterAuxContent){this._highlighterAuxContent=l.create('span',{className:'highlighterAuxContent'});l.insertAfter(this._highlighterContent,this._highlighterAuxContent);}l.setContent(this._highlighterAuxContent,y);if(y){n.setPlaceholder(this._input,'');}else n.setPlaceholder(this._input,this._placeholder);this._updateHighlighter();this._updateHeight();}},hasAuxContent:function(){var y=this.getAuxContentRoot();return y&&y.innerHTML.length>0;},getAuxContentRoot:function(){return this._highlighterAuxContent;},addMention:function(y){var z=this.getValue();n.setValue(this._input,z+" "+y.text);this._addToken(y);this._update();},getMentions:function(){return this._mentioned;}});e.exports=x;});
__d("legacy:MentionsInput",["MentionsInput"],function(a,b,c,d){a.MentionsInput=b('MentionsInput');},3);
__d("TypeaheadAreaCore",["Class","InputSelection","TypeaheadCore","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('Class'),h=b('InputSelection'),i=b('TypeaheadCore'),j=b('copyProperties'),k=b('emptyFunction');function l(m){this.parent.construct(this,m);this.matcher=new RegExp(this.matcher+'$');this.preventFocusChangeOnTab=true;}g.extend(l,i);j(l.prototype,{prefix:'',suffix:', ',matcher:"\\b[^,]*",click:k,select:function(m){this.parent.select(m);var n=this.element.value,o=this.prefix+m.text+this.suffix;this.expandBounds(n,o);var p=n.substring(0,this.start),q=n.substring(this.end);this.element.value=p+o+q;h.set(this.element,p.length+o.length);},expandBounds:function(m,n){m=m.toLowerCase().trim();n=n.toLowerCase();var o,p,q,r,s=/\s/;p=m.substring(this.start,this.end);q=n.indexOf(p);o=this.start;while(o>=0&&q>=0){r=m.charAt(o-1);if(!r||s.test(r))this.start=o;p=r+p;q=n.indexOf(p);o--;}p=m.substring(this.start,this.end);q=n.indexOf(p);o=this.end;while(o<=m.length&&q>=0){r=m.charAt(o);if(!r||s.test(r))this.end=o;p=p+r;q=n.indexOf(p);o++;}},getRawValue:function(){var m=h.get(this.element).start||0;return this.parent.getValue().substring(0,m);},getValue:function(){var m=this.matcher&&this.matcher.exec(this.getRawValue());if(!m)return '';var n=m[0],o=m.index+n.length;n=n.replace(/^\s/,'');var p=n.length;n=n.replace(/\s$/,'');var q=p-n.length;this.start=o-p;this.end=o+q;return m[1]||m[0];}});e.exports=l;});
__d("TypeaheadMetrics",["event-extensions","AsyncRequest","Typeahead","copyProperties","emptyFunction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('Typeahead'),i=b('copyProperties'),j=b('emptyFunction');function k(l){this.extraData={};i(this,l);}i(k.prototype,{endPoint:'/ajax/typeahead/record_basic_metrics.php',init:function(l){this.init=j;this.core=l.getCore();this.view=l.getView();this.data=l.getData();this.stats={};this.sessionActive=false;this._sessionStartEvents=[];this._sessionEndEvents=[];this._reset();this.initEvents();},_reset:function(){this.stats={};this.avgStats={};this.sessionActive=false;this.sid=Math.floor(Date.now()*Math.random());this.data.setQueryData({sid:this.sid});},recordSelect:function(l){var m=l.selected;if(m.uid==null){this.recordStat('selected_id','SELECT_NULL');}else this.recordStat('selected_id',m.uid);this.recordStat('selected_type',m.type);this.recordStat('selected_position',l.index);this.recordStat('selected_with_mouse',l.clicked?1:0);this._sessionEnd();},bindSessionStart:function(l,event,m){if(m)for(var n=0;n<this._sessionStartEvents.length;++n){var o=this._sessionStartEvents[n];o.obj.unsubscribe(o.token);}this._sessionStartEvents.push({obj:l,token:l.subscribe(event,function(p,q){this._sessionStart();}.bind(this))});},bindSessionEnd:function(l,event,m){if(m)for(var n=0;n<this._sessionEndEvents.length;++n){var o=this._sessionEndEvents[n];o.obj.unsubscribe(o.token);}this._sessionEndEvents.push({obj:l,token:l.subscribe(event,function(p,q){this._sessionEnd();}.bind(this))});},initEvents:function(){this.bindSessionStart(this.core,'focus',false);this.bindSessionEnd(this.core,'blur',false);this.view.subscribe('select',function(l,m){this.recordSelect(m);}.bind(this));this.bindSessionEnd(this.view,'select',false);this.view.subscribe('render',function(l,m){this.results=m;}.bind(this));this.data.subscribe('beforeQuery',function(l,m){if(!m.value)return;this.query=m.value;this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('beforeFetch',function(l,m){if(m.fetch_context.bootstrap){this.bootstrapBegin=Date.now();}else m.fetch_context.queryBegin=Date.now();}.bind(this));this.data.subscribe('fetchComplete',function(l,m){if(m.fetch_context.bootstrap){this.recordAvgStat('bootstrap_latency',Date.now()-this.bootstrapBegin);var n={};m.response.payload.entries.forEach(function(o){if(!n[o.type]){n[o.type]=1;}else n[o.type]++;});this.recordStat('bootstrap_response_types',n);this.bootstrapped=true;}else this.recordAvgStat('avg_query_latency',Date.now()-m.fetch_context.queryBegin);}.bind(this));this.data.subscribe('dirty',function(l,m){this.bootstrapped=false;});},_sessionStart:function(){if(this.sessionActive)return;this.sessionActive=true;},_sessionEnd:function(){if(!this.sessionActive)return;this.sessionActive=false;this.submit();this._reset();},recordStat:function(l,m){this.stats[l]=m;},recordCountStat:function(l){var m=this.stats[l];this.stats[l]=m?m+1:1;},recordAvgStat:function(l,m){if(this.avgStats[l]){this.avgStats[l][0]+=m;++this.avgStats[l][1];}else this.avgStats[l]=[m,1];},submit:function(){if(Object.keys(this.stats).length){i(this.stats,this.extraData);if(this.results){var l=(this.results).map(function(o,p){return o.uid;});this.recordStat('candidate_results',JSON.stringify(l));}if(this.query)this.recordStat('query',this.query);if(this.sid)this.recordStat('sid',this.sid);if(this.bootstrapped)this.recordStat('bootstrapped',1);for(var m in this.avgStats){var n=this.avgStats[m];this.stats[m]=n[0]/n[1];}new g().setURI(this.endPoint).setMethod('POST').setData({stats:this.stats}).send();this._reset();}}});k.register=function(l,m,n){if(document.activeElement===l){m.init(n);}else var o=Event.listen(l,'focus',function(){m.init(n);o.remove();});};e.exports=k;});
__d("TypeaheadHoistFriends",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._typeahead=i;}g(h.prototype,{_subscription:null,enable:function(){var i=this._typeahead.getView();this._subscription=i.subscribe('beforeRender',function(j,k){var l=[],m=[];for(var n=0;n<k.results.length;++n){var o=k.results[n];if(o.type=='user'&&o.bootstrapped){m.push(o);}else l.push(o);}k.results=m.concat(l);});},disable:function(){this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;}});e.exports=h;});
__d("legacy:HoistFriendsTypeaheadBehavior",["TypeaheadHoistFriends"],function(a,b,c,d){var e=b('TypeaheadHoistFriends');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.hoistFriends=function(f){f.enableBehavior(e);};},3);
__d("ComposerXAttachmentBootstrap",["CSS","Form","Parent","URI","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Form'),i=b('Parent'),j=b('URI'),k=b('cx'),l=[],m={bootstrap:function(n){m.load(i.byTag(n,'form'),n.getAttribute('data-endpoint'));},load:function(n,o,p){var q=j(o).addQueryData({composerurihash:m.getURIHash(o)});g.conditionClass(n,"_fu",p);var r=i.byClass(n,"_2_4");g.removeClass(r,'async_saving');h.setDisabled(n,false);n.action=q.toString();h.bootstrap(n);},getURIHash:function(n){if(n==='initial')return 'initial';var o=l.indexOf(n);if(o!==-1){return o+'';}else{o=l.length;l[o]=n;return o+'';}}};e.exports=m;});
__d("ComposerXStore",["function-extensions","Arbiter","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('ge'),i={};function j(l,m){return 'ComposerX/'+l+'/'+m;}var k={set:function(l,m,n){if(!i[l])i[l]={};i[l][m]=n;g.inform(j(l,m),{},g.BEHAVIOR_STATE);},get:function(l,m){if(i[l])return i[l][m];return null;},getAllForComposer:function(l){return i[l]||{};},waitForComponents:function(l,m,n){g.registerCallback(n,m.map(j.curry(l)));}};g.subscribe('page_transition',function(){for(var l in i)if(!h(l))delete i[l];});e.exports=k;});
__d("ComposerX",["Arbiter","ComposerXAttachmentBootstrap","ComposerXStore","CSS","DOM","DOMQuery","copyProperties","csx","cx","getObjectValues"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ComposerXAttachmentBootstrap'),i=b('ComposerXStore'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('copyProperties'),n=b('csx'),o=b('cx'),p=b('getObjectValues');function q(r){this._root=r;this._composerID=r.id;this._attachments={};this._attachmentFetchForm=l.find(r,"._2_4");this._resetSubscription=g.subscribe('composer/publish',function(s,t){if(t.composer_id===this._composerID)this.reset();}.bind(this));}m(q.prototype,{_lastEndpointHash:'beforeinit',_lastFetchEndpoint:'',_initialAttachmentAlias:null,getAttachment:function(r,s){var t=h.getURIHash(r);this._lastEndpointHash=t;var u=this._attachments[t];if(u){i.waitForComponents(this._composerID,u.required_components,this._initAttachment.bind(this,u.instance,t,u.placeholders));return;}if(r!==this._lastFetchEndpoint&&r!=='initial'){h.load(this._attachmentFetchForm,r,s);this._lastFetchEndpoint=r;}},setAttachment:function(r,s,t,u){s.setComposerID(this._composerID);this._attachments[r]={instance:s,placeholders:t,required_components:u};if(r==='initial'){if(this._initialAttachmentAlias){var v=h.getURIHash(this._initialAttachmentAlias);this._attachments[v]=this._attachments.initial;}if(this._currentInstance)return;}var w=l.find(this._root,"div._118"),x=s.getRoot();if(x.parentNode!==w){j.hide(x);k.appendContent(w,x);}i.waitForComponents(this._composerID,u,this._initAttachment.bind(this,s,r,t));},setComponent:function(r,s){if(!i.get(this._composerID,r)){i.set(this._composerID,r,s);k.appendContent(this._attachmentFetchForm,k.create('input',{type:'hidden',name:'loaded_components[]',value:r}));}},reset:function(){if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null;}for(var r in this._attachments)this._attachments[r].instance.reset();var s=i.getAllForComposer(this._composerID);p(s).forEach(function(t){if(t.reset)t.reset(t);});this.getAttachment('initial');g.inform('composer/reset');},destroy:function(){if(this._resetSubscription){this._resetSubscription.unsubscribe();this._resetSubscription=null;}},addPlaceholders:function(r,s){var t;for(var u in this._attachments){t=this._attachments[u];if(t.instance===r){s.forEach(function(v){t.placeholders.push(v);t.required_components.push(v.component_name);});break;}}if(this._currentInstance===r)this._fillPlaceholders(s);},setInitialAttachmentAlias:function(r){this._initialAttachmentAlias=r;if(this._attachments.initial){var s=h.getURIHash(r);this._attachments[s]=this._attachments.initial;}},_initAttachment:function(r,s,t){if(this._currentInstance===r||(this._lastEndpointHash!=='beforeinit'&&this._lastEndpointHash!==s))return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup();}this._currentInstance=r;var u=l.find(this._root,"div._118"),v=u.childNodes,w=r.getRoot();for(var x=0;x<v.length;x++)if(v[x]!==w)j.hide(v[x]);j.show(w);this._fillPlaceholders(t);r.initWithComponents(s==='initial');this._setAttachmentSelectedClass(r.attachmentClassName);g.inform('composer/initializedAttachment',{composerRoot:this._root,isInitial:s==='initial'});},_fillPlaceholders:function(r){r.forEach(function(s){var t=i.get(this._composerID,s.component_name);if(s.element!==t.element.parentNode)k.setContent(s.element,t.element);}.bind(this));},_setAttachmentSelectedClass:function(r){var s=l.scry(this._root,"._4n")[0];if(s)j.removeClass(s,"_4n");if(r){var t=l.scry(this._root,'.'+r)[0];if(t)j.addClass(t,"_4n");}}});e.exports=q;});
__d("ComposerXAttachment",["ComposerXStore","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('ComposerXStore'),h=b('copyProperties'),i=b('emptyFunction');function j(){}h(j.prototype,{getRoot:i,initWithComponents:function(k){},cleanup:i,reset:i,attachmentClassName:'',getComponent:function(k){return g.get(this._composerID,k);},canSwitchAway:i.thatReturnsTrue,setComposerID:function(k){this._composerID=k;}});e.exports=j;});
__d("ComposerXController",["Arbiter","ComposerX","ComposerXAttachmentBootstrap","Parent","$","cx","emptyFunction","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ComposerX'),i=b('ComposerXAttachmentBootstrap'),j=b('Parent'),k=b('$'),l=b('cx'),m=b('emptyFunction'),n=b('ge'),o={};function p(r){var s=j.byClass(k(r),"_119"),t=s.id;if(!o[t])o[t]=new h(s);return o[t];}var q={getAttachment:function(r,s,t){var u=p(r);u.getAttachment(s,t);},setAttachment:function(r,s,t,u,v){var w=p(r);w.setAttachment(s,t,u,v);},setComponent:function(r,s,t){var u=p(r);u.setComponent(s,t);},reset:function(r){var s=p(r);s.reset();},setInitialAttachmentAlias:function(r,s){var t=p(r);t.setInitialAttachmentAlias(s);},holdTheMarkup:m,getEndpoint:function(r,s,t){var u=p(r);i.load(u._attachmentFetchForm,s,t);},addPlaceholders:function(r,s,t){var u=p(r);u.addPlaceholders(s,t);}};i.bootstrap=function(r){q.getAttachment(r,r.getAttribute('data-endpoint'));};g.subscribe('page_transition',function(){for(var r in o)if(!n(r)){o[r].destroy();delete o[r];}});e.exports=q;});
__d("ComposerXAttachmentUtils",["DOMQuery","Input","PageTransitions","Run","StickyPlaceholderInput","tx"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('Input'),i=b('PageTransitions'),j=b('Run'),k=b('StickyPlaceholderInput'),l=b('tx'),m={initMentions:function(n,o){n.instance.setPlaceholder(o);var p=g.find(n.element,'textarea.input');h.focus(p);},setStickyPlaceholderText:function(n,o){var p=g.find(n,'.textInput');k.setPlaceholderText(p,o);},registerInputForLeaveWarning:function(n){j.onBeforeUnload(function(){var o=i.getNextURI();if(o.getQueryData().hasOwnProperty('theater'))return;if(a.Dialog&&a.Dialog.getCurrent())return;if(n.offsetParent!==null&&!h.isEmpty(n))return "Voc\u00ea ainda n\u00e3o terminou de escrever sua publica\u00e7\u00e3o. Quer mesmo sair sem terminar?";});}};e.exports=m;});
__d("ComposerXDragDropStore",[],function(a,b,c,d,e,f){var g={},h={},i={};function j(n,o){return n+'/'+o;}function k(n,o){var p=j(n,o);if(!i[p])i[p]=[];return i[p];}function l(n,o){var p=g[j(n,o)];if(!p)return;var q=k(n,o);while(q.length)p(q.pop());}var m={register:function(n,o,p,q){h[j(n,o)]=q;p.subscribe('failure',function(r,s){var t=k(n,o);t.push({success:false,upload:s});l(n,o);});},handleFiles:function(n,o){var p=h[j(n,o)];delete h[j(n,o)];return p;},subscribe:function(n,o,p){g[j(n,o)]=p;l(n,o);},setPhoto:function(n,o,p){var q=k(n,o);q.push({success:true,payload:p});l(n,o);}};e.exports=m;});
__d("DragDropFileUpload",[],function(a,b,c,d,e,f){f.isSupported=function(){return typeof(FileList)!=="undefined";};});
__d("DocumentDragDrop",["event-extensions","CSS","DOM","DragDropFileUpload","emptyFunction","getObjectValues"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOM'),i=b('DragDropFileUpload'),j=b('emptyFunction'),k=b('getObjectValues'),l={},m=0;function n(){m=0;k(l).forEach(function(q){g.removeClass(q.element,q.className);});}function o(){if(!i.isSupported())return;Event.listen(document,'dragenter',function(r){if(m===0)k(l).forEach(function(s){g.addClass(s.element,s.className);});m++;});Event.listen(document,'dragleave',function(r){m--;if(m===0)n();});Event.listen(document,'drop',Event.prevent);Event.listen(document,'dragover',Event.prevent);var q=null;document.addEventListener('dragover',function(){q&&clearTimeout(q);q=setTimeout(n,839);},true);o=j;}var p={registerStatusElement:function(q,r){o();l[h.getID(q)]={element:q,className:r};},removeStatusElement:function(q){var r=h.getID(q),s=l[r];g.removeClass(s.element,s.className);delete l[r];}};e.exports=p;});
__d("DragDropTarget",["event-extensions","CSS","DocumentDragDrop","DragDropFileUpload","copyProperties","emptyFunction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DocumentDragDrop'),i=b('DragDropFileUpload'),j=b('copyProperties'),k=b('emptyFunction');function l(m){this._element=m;this._listeners=[];this._statusElem=m;this._dragEnterCount=0;this._enabled=false;}j(l.prototype,{_onFilesDropCallback:k,_onURLDropCallback:k,_fileFilterFn:k.thatReturnsArgument,setOnFilesDropCallback:function(m){this._onFilesDropCallback=m;return this;},setOnURLDropCallback:function(m){this._onURLDropCallback=m;return this;},enable:function(){if(!i.isSupported())return this;h.registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.push(Event.listen(this._element,'dragenter',this._onDragEnter.bind(this)));this._listeners.push(Event.listen(this._element,'dragleave',this._onDragLeave.bind(this)));this._listeners.push(Event.listen(this._element,'dragover',Event.kill));this._listeners.push(Event.listen(this._element,'drop',function(m){this._dragEnterCount=0;g.removeClass(this._statusElem,'fbDropReady');var n=this._fileFilterFn(m.dataTransfer.files);if(n.length)this._onFilesDropCallback(n);var o=m.dataTransfer.getData('url')||m.dataTransfer.getData('text/uri-list');if(o)this._onURLDropCallback(o);m.kill();}.bind(this)));this._enabled=true;return this;},disable:function(){if(!this._enabled)return this;h.removeStatusElement(this._statusElem,'fbWantsDragDrop');g.removeClass(this._statusElem,'fbDropReady');while(this._listeners.length)this._listeners.pop().remove();this._enabled=false;return this;},setFileFilter:function(m){this._fileFilterFn=m;return this;},setStatusElement:function(m){this._statusElem=m;return this;},_onDragEnter:function(){if(this._dragEnterCount===0)g.addClass(this._statusElem,'fbDropReady');this._dragEnterCount++;},_onDragLeave:function(){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0)g.removeClass(this._statusElem,'fbDropReady');}});e.exports=l;});
__d("ComposerXDragDrop",["AsyncUploadRequest","ComposerXController","ComposerXDragDropStore","DragDropTarget","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncUploadRequest'),h=b('ComposerXController'),i=b('ComposerXDragDropStore'),j=b('DragDropTarget'),k=b('URI'),l=b('copyProperties'),m='/ajax/composerx/attachment/media/saveunpublished/',n='/ajax/composerx/attachment/media/upload/',o='/ajax/composerx/attachment/link/scraper/',p=function(r){r();};function q(r,s,t,u){this._root=r;this._composerID=s;this._targetID=t;u=u||p;this._dragdrop=new j(r).setOnFilesDropCallback(function(v){u(this._uploadFiles.bind(this,v));}.bind(this)).setFileFilter(q.filterImages).enable();}q.filterImages=function(r){var s=[];for(var t=0;t<r.length;t++)if(r[t].type.match('image/*'))s.push(r[t]);return s;};l(q.prototype,{enableURLDropping:function(){this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));},deactivate:function(){this._dragdrop.disable();},_uploadFiles:function(r){var s=new g(m);i.register(this._composerID,'mediaupload',s,r);s.setFiles(r).setData({dragdrop:true,composerid:this._composerID,attachmentid:'mediaupload',profile_id:this._targetID,source:8}).send();h.getAttachment(this._root,n);},_onURLDrop:function(r){var s=new k(o);s.addQueryData({scrape_url:encodeURIComponent(r)});h.getAttachment(this._root,s.toString());}});e.exports=q;});
__d("ComposerXBootloadStatusAttachment",["event-extensions","function-extensions","Bootloader","Class","ComposerXAttachment","ComposerXController","ComposerXDragDrop","CSS","DOM","DOMQuery","Input","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Bootloader'),h=b('Class'),i=b('ComposerXAttachment'),j=b('ComposerXController'),k=b('ComposerXDragDrop'),l=b('CSS'),m=b('DOM'),n=b('DOMQuery'),o=b('Input'),p=b('Parent'),q=b('copyProperties'),r=b('csx'),s=b('cx'),t={};function u(v,w){this.parent.construct(this);this._root=v;this._config=w;}h.extend(u,i);q(u.prototype,{_attachmentIsActive:false,_bootloading:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,attachmentClassName:"_4j",getRoot:function(){return this._root;},initWithComponents:function(v){t[this._composerID]=this;this._attachmentIsActive=true;var w=n.find(this.getComponent('maininput').element,'textarea.input');if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(n.contains(this._root,document.activeElement)){this._onInitialFocus();}else this._focusListener=Event.listen(w,'focus',this._onInitialFocus.bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!v)o.focus(w);if(this._config.plus_version){this._dragdrop=new k(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}},_fullInitWithComponents:function(){g.loadModules(['ComposerXPrivacyWidgetTags','URLScraper','URI'],function(v,w,x){this._tagger.init(this);this._privacyWidgetTags=new v(this);var y=n.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new w(y);this._scraper.subscribe('match',function(z,aa){var ba=new x('/ajax/composerx/attachment/link/scraper/');ba.addQueryData({scrape_url:encodeURIComponent(aa.url)});j.getAttachment(this._root,ba.toString());}.bind(this));}this._scraper.enable();this._scraper.check();}.bind(this));},cleanup:function(){this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._fullVersion){this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();}},reset:function(){var v=p.byClass(this._root,"child_was_focused");if(v)l.removeClass(v,"child_was_focused");if(this._tagger)this._tagger.reset();this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);},canSwitchAway:function(){return !p.byClass(this._root,'async_saving');},setBootloadedContent:function(v,w,x){var y=n.find(this._root,"._3-6"),z=n.find(this._root,"._3-7");m.setContent(y,v.tagger_content);m.setContent(z,v.tagger_icons);j.addPlaceholders(this._root,this,x);this._tagger=w;this._fullVersion=true;if(this._attachmentIsActive){if(this._focusListener){this._focusListener.remove();this._focusListener=null;}this._fullInitWithComponents();}},_onInitialFocus:function(){j.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);this._bootloading=true;}});u.setBootloadedContent=function(v,w,x,y){var z=t[v];if(z)z.setBootloadedContent(w,x,y);};e.exports=u;});
__d("ComposerXMentionsInputReset",["DOMQuery","Input"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('Input');function i(j){var k=g.scry(j.element,'textarea.input')[0];j.instance.reset();h.reset(k);}e.exports=i;});
__d("DynamicIconSelector",["Button","CSS","DOM","Selector"],function(a,b,c,d,e,f){var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('Selector'),k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;});
__d("PrivacyConst",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h={FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},i={EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},j={BaseValue:h,FriendsValue:i};e.exports=j;});
__d("AudienceSelector",["Arbiter","CSS","DOM","DynamicIconSelector","PrivacyConst","Selector","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DynamicIconSelector'),k=b('PrivacyConst'),l=b('Selector'),m=b('copyProperties');l.subscribe('select',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;var r=l.getOptionValue(q.option);g.inform('AudienceSelector/changed',q);if(r==k.BaseValue.CUSTOM&&!h.hasClass(q.option,'noDialog')){l.toggle(q.selector);return false;}if(h.hasClass(q.selector,'dataTooltip')){var s=i.find(q.option,'.itemAnchor').getAttribute('data-tooltip');l.setButtonTooltip(q.selector,s||null);}if(!h.hasClass(q.option,'specialOption'))return;var t=i.find(q.option,'a').getAttribute('data-type');if(h.hasClass(q.option,'moreOption')){h.addClass(q.selector,t);h.addClass(q.selector,'showSecondaryOptions');return false;}else if(h.hasClass(q.option,'returnOption')){h.removeClass(q.selector,'showSecondaryOptions');h.removeClass(q.selector,'friendList');return false;}});var n={},o={hasTags:function(p){return n.hasOwnProperty(p);},setHasTags:function(p){if(!p)return;n[p]=true;}};g.subscribe('CustomPrivacyOption/update',function(p,q){if(!h.hasClass(q.selector,'audienceSelector'))return;l.setSelected(q.selector,l.getOptionValue(q.option));j.swapIcon(q.selector);l.setButtonTooltip(q.selector,q.tooltip);g.inform('AudienceSelector/update',q.selector);});e.exports=o;});
__d("MentionsTypeaheadAreaView",["Class","ContextualTypeaheadView","Parent","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('ContextualTypeaheadView'),i=b('Parent'),j=b('copyProperties');function k(l,m){this.parent.construct(this,l,m);}g.extend(k,h);j(k.prototype,{getContext:function(){return i.byClass(this.element,'uiMentionsInput');}});e.exports=k;});
__d("ComposerXTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('cx');function i(j){g.removeClass(j.element,"_4k");g.removeClass(j.element,"_4l");g.removeClass(j.element,"_4m");}e.exports=i;});
__d("ComposerXPrivacyWidgetReset",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter');function h(i){g.inform('Composer/changedtags',{withTags:[],mention:{},eventTag:false});}e.exports=h;});
__d("legacy:ARIA",["ARIA"],function(a,b,c,d){a.ARIA=b('ARIA');},3);
__d("CustomPrivacyOption",["event-extensions","Arbiter","AsyncDialog","AsyncRequest","DOM","Form","Parent","PrivacyConst","Selector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncDialog'),i=b('AsyncRequest'),j=b('DOM'),k=b('Form'),l=b('Parent'),m=b('PrivacyConst'),n=b('Selector'),o=b('copyProperties');function p(q,r,s,t,u,v){if(!q)return;(function(){this.initCustomState(q,r,s);Event.listen(q,'click',function(event){this.openCustomDialog(event,r,t,v);}.bind(this));this._initSelector(q,u);}).bind(this).defer();}o(p,{_instances:{},update:function(q,r,s,t){var u=p._instances[q];u._update(r,s)._updateOption(s,t);g.inform('Form/change',{node:u._container});},getData:function(q){return p._instances[q]._privacyData;}});o(p.prototype,{_initSelector:function(q,r){this._selector=l.byClass(q,'uiSelector');n.listen(this._selector,'select',function(s){if(s.option._id!=this._id)this.clearCustomState();}.bind(this));if(r)n.setButtonTooltip(this._selector,r);},_updateOption:function(q,r){var s=n.getOption(this._selector,q)||n.getOption(this._selector,m.BaseValue.CUSTOM+'');g.inform('CustomPrivacyOption/update',{selector:this._selector,option:s,tooltip:r});return this;},_update:function(q,r){var s=r==m.BaseValue.CUSTOM||!n.getOption(this._selector,r),t=this._selector.getAttribute('data-name');this.updateCustomState(q,s,t);return this;},initCustomState:function(q,r,s){p._instances[r]=this;this._container=j.find(q,'.customPrivacyInputs');this._id=s;this._privacyData={};var t=k.serialize(this._container);if(t.audience)this._privacyData=t.audience[s];return q;},openCustomDialog:function(event,q,r,s){var t=new i('/ajax/privacy/custom_dialog/').setData({option_id:q,id:this._id,privacy_data:this._privacyData,explain_tags:r,autosave:s});t.setRelativeTo(event.getTarget());h.send(t);},updateCustomState:function(q,r,s){this.clearCustomState();this._privacyData=o({},q);if(r)if(s){s=s.slice(0,-'[value]'.length);var t={};t[s]=q;k.createHiddenInputs(t,this._container,null,true);}},clearCustomState:function(){this._privacyData={};j.empty(this._container);}});e.exports=p;});
__d("ComposerAudienceSelector",["DynamicIconSelector","CustomPrivacyOption","PrivacyConst","Selector"],function(a,b,c,d,e,f){b('DynamicIconSelector');var g=b('CustomPrivacyOption'),h=b('PrivacyConst'),i=b('Selector'),j={},k={},l={syncSelector:function(m){j[m]&&i.setSelected(m,j[m]);if(j[m]==h.BaseValue.CUSTOM&&k[m]){var n=i.getOption(m,h.BaseValue.CUSTOM+''),o=k[m];(function(){g.update(n.id,o.data,o.audience,o.tooltip);}).defer();}}};e.exports=l;});
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b('AudienceSelector');},3);
__d("legacy:ComposerAudienceSelector",["ComposerAudienceSelector"],function(a,b,c,d){a.ComposerAudienceSelector=b('ComposerAudienceSelector');},3);
__d("FriendListPrivacyOptions",["Arbiter","AsyncDialog","AsyncRequest","Dialog","DOMQuery","PageTransitions","Parent","Selector","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncDialog'),i=b('AsyncRequest'),j=b('Dialog'),k=b('DOMQuery'),l=b('PageTransitions'),m=b('Parent'),n=b('Selector'),o=b('$'),p=b('ge'),q=false,r=false,s=null,t={},u=function(w){if(!Object.keys(t).length)l.registerHandler(function(){t={};q=false;r=false;});var x=w.getAttribute('data-name');t[x]=w;n.listen(w,'select',function(y){var z=y.option,aa=k.find(z,'a.itemAnchor'),ba=aa.getAttribute('data-flid');if(!ba)return;var ca=aa.getAttribute('data-dynamic');if(ca&&q){v.showSmartListNux(z,ba);}else if(!ca&&r)v.showDumbListNux([ba]);});},v={listen:function(w,x,y){var z=p(w);if(!z)return;var aa=m.byClass(z,'audienceSelector');if(aa){u(aa);q=x;r=y;}},showSmartListNux:function(w,x){w=o(w);new i('/ajax/friends/lists/smart_list_publish_nux.php').setData({option_id:w.id,flid:x}).send();q=false;},setContextualDialog:function(w,x){x=o(x);var y=m.byClass(x,'audienceSelector');if(y){w.setContext(y);w.show();var z=g.subscribe('composer/publish',function(){w.hide();});w.subscribe('hide',function(){z.unsubscribe();});}},showDumbListNux:function(w){h.send(new i('/ajax/friends/lists/dumb_list_publish_nux.php').setData({flids:w}));r=false;},showBothListsNux:function(w,x){s=o(w);v.showDumbListNux(x);},setDialogX:function(w){if(!s)return;w.subscribe('hide',function(){v.showSmartListNux(s);s=null;});},setDialog:function(){if(!s)return;var w=j.getCurrent();if(w)w.setCloseHandler(function(){v.showSmartListNux(s);s=null;});}};e.exports=v;});
__d("OnlyMePrivacyOption",["Arbiter","copyProperties","CSS","DOM","Env","Parent","PrivacyConst","Selector","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('DOM'),k=b('Env'),l=b('Parent'),m=b('PrivacyConst'),n=b('Selector'),o=b('tx');function p(q){this._selector=l.byClass(q,'composerAudienceSelector');this._plusLabel=j.scry(q,'.plusLabel')[0];if(!this._selector)return;this._elem=q;this._taggedIDs=[];this._tags=[];this._hasEvent=false;this._recalculateTooltipAndLabel();this._updateSelector();g.subscribe('Composer/changedtags',function(r,s){var t=this._hasEvent;this._hasEvent=!!s.eventTag;this._tags=s.withTags.map(function(v){return v.getText();});this._taggedIDs=s.withTags.map(function(v){return v.getValue();});for(var u in s.mention)if(s.mention[u].type=='user'&&s.mention[u].uid!=k.user){this._tags.push(s.mention[u].text);this._taggedIDs.push(s.mention[u].uid);}else if(s.mention[u].type=='event')this._hasEvent=true;if(this._hasEvent&&t!=this._hasEvent)this._eventTagChanged();if(this._recalculateTooltipAndLabel()&&n.isOptionSelected(this._elem)){this._updateSelector();g.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));n.listen(this._selector,'change',this._updateSelector.bind(this));}h(p.prototype,{_eventTagChanged:function(){},_getChangedData:function(){return {hasEvent:this._hasEvent,tags:this._taggedIDs,privacy:m.FriendsValue.SELF};},_recalculateTooltipAndLabel:function(){var q=this._tooltip,r=this._label;if(this._taggedIDs.length){this._tooltip="Qualquer pessoa marcada";this._label="Somente eu"+' (+)';}else{this._tooltip="Somente voc\u00ea";this._label="Somente eu";}i.conditionShow(this._plusLabel,this._taggedIDs.length);return (q!=this._tooltip)||(r!=this._label);},_updateSelector:function(){if(n.isOptionSelected(this._elem)){n.setButtonLabel(this._selector,this._label);n.setButtonTooltip(this._selector,this._tooltip);return false;}return true;}});e.exports=p;});
__d("FriendsMinusAcquaintancesPrivacyOption",["Class","OnlyMePrivacyOption","PrivacyConst","CSS","tx","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('OnlyMePrivacyOption'),i=b('PrivacyConst'),j=i.FriendsValue,k=b('CSS'),l=b('tx'),m=b('copyProperties');function n(o,p){this._hasRestricted=p;this.parent.construct(this,o);}g.extend(n,h);m(n.prototype,{_getChangedData:function(){return {hasEvent:this._hasEvent,tags:this._taggedIDs,privacy:j.FRIENDS_MINUS_ACQUAINTANCES};},_recalculateTooltipAndLabel:function(){var o=this._hasEvent,p=this._tags.length,q=this._tooltip,r=this._label,s=this._taggedIDs.length||this._hasEvent;if(o){if(p>1){this._tooltip=this._hasRestricted?"Seus amigos, amigos de qualquer pessoa marcada e convidados do evento; exceto: Conhecidos, Restrito":"Seus amigos, amigos de qualquer pessoa marcada e convidados do evento; exceto: Conhecidos";}else if(p==1){if(this._hasRestricted){this._tooltip=l._("Seus amigos, amigos de {user} e convidados do evento; exceto: Conhecidos, Restrito",{user:this._tags[0]});}else this._tooltip=l._("Seus amigos, amigos de {user} e convidados do evento; exceto: Conhecidos",{user:this._tags[0]});}else this._tooltip=this._hasRestricted?"Seus amigos e os convidados do evento; exceto: restritos":"Seus amigos e os convidados do evento; exceto: conhecidos";}else this._tooltip=this._hasRestricted?"Amigos exceto Conhecidos, Restritos":"Amigos exceto conhecidos";k.conditionShow(this._plusLabel,s);this._label=this._elem.getAttribute('data-label');if(s)this._label+=' (+)';return ((q!=this._tooltip)||(r!=this._label));}});e.exports=n;});
__d("FriendsPrivacyOption",["Arbiter","Class","CSS","OnlyMePrivacyOption","PrivacyConst","Selector","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('OnlyMePrivacyOption'),k=b('PrivacyConst'),l=b('Selector'),m=b('tx');function n(o,p){this._hasRestricted=p;this.parent.construct(this,o);}h.extend(n,j);n.prototype._getChangedData=function(){return {hasEvent:this._hasEvent,tags:this._taggedIDs,privacy:k.FriendsValue.ALL_FRIENDS};};n.prototype._eventTagChanged=function(){var o=this._getChangedData();o.privacy=l.getValue(this._selector);g.inform('EventTagged/changed',o);};n.prototype._recalculateTooltipAndLabel=function(){var o=this._hasEvent,p=this._tags.length,q=this._tooltip,r=this._label;if(p>2){if(o){this._tooltip=this._hasRestricted?"Seus amigos, amigos de qualquer pessoa marcada e convidados do evento; Exceto: Restritos":"Seus amigos, amigos de qualquer pessoa marcada e convidados do evento";}else this._tooltip=this._hasRestricted?"Seus amigos e amigos de qualquer pessoa marcada; exceto: Restrito":"Seus amigos e amigos das pessoas que foram marcadas";}else if(p==2){if(o){if(this._hasRestricted){this._tooltip="Seus amigos, amigos de qualquer pessoa marcada e convidados do evento; Exceto: Restritos";}else this._tooltip="Seus amigos, amigos de qualquer pessoa marcada e convidados do evento";}else if(this._hasRestricted){this._tooltip=m._("Seus amigos, amigos de {user} e {user2}; exceto: Restritos",{user:this._tags[0],user2:this._tags[1]});}else this._tooltip=m._("Seus amigos, os amigos de {user} e os amigos de {user2}",{user:this._tags[0],user2:this._tags[1]});}else if(p==1){if(o){if(this._hasRestricted){this._tooltip=m._("Seus amigos, amigos de {user} e convidados do evento; Exceto: Restritos",{user:this._tags[0]});}else this._tooltip=m._("Seus amigos, amigos de {user} e convidados do evento.",{user:this._tags[0]});}else if(this._hasRestricted){this._tooltip=m._("Seus amigos e amigos de {user}; exceto: Restritos",{user:this._tags[0]});}else this._tooltip=m._("Seus amigos e amigos de {user}",{user:this._tags[0]});}else if(o){this._tooltip=this._hasRestricted?"Seus amigos e os convidados do evento; Exceto: Restritos":"Seus amigos e convidados do evento";}else this._tooltip=this._hasRestricted?"Seus amigos; exceto: Restrito":"Seus amigos";i.conditionShow(this._plusLabel,this._tags.length);this._label=this._elem.getAttribute('data-label');if(this._tags.length||this._hasEvent)this._label+=' (+)';return (q!=this._tooltip)||(r!=this._label);};e.exports=n;});
__d("legacy:LayerDestroyOnHide",["LayerDestroyOnHide"],function(a,b,c,d){a.LayerDestroyOnHide=b('LayerDestroyOnHide');},3);
function MetaComposerEdDialog(){}copyProperties(MetaComposerEdDialog.prototype,{init:function(a,b,c,d,e,f,g){MetaComposerEdDialog.timesTagEduShown=c;MetaComposerEdDialog.timesEventTagEduShown=e;MetaComposerEdDialog.timesStickyEduShown=g;if(MetaComposerEdDialog.singleton){a.destroy();return;}MetaComposerEdDialog.singleton=this;this._dialog=a;if(f)Arbiter.subscribe('composer/mutate',function(h,i){this._sendEducationRequest({sticky_num:MetaComposerEdDialog.timesStickyEduShown},'/ajax/composer/audience/sticky_education');}.bind(this));if(d)if(e===0){Arbiter.subscribe('EventTagged/changed',function(h,i){this._sendEducationRequest({id:"composerTourAudience",privacy:i.privacy,event_tag_num:MetaComposerEdDialog.timesEventTagEduShown},'ajax/events/tagging/user_education',null);}.bind(this));Arbiter.subscribe(['composer/publish','composer/reset'],function(){var h=ge("event_tagging_tag_expansion_NUX");h&&CSS.hide(h);}.bind(this));}else Arbiter.subscribe('EventTagged/changed',function(h,i){this._sendEducationRequest({ids:i.tags,from:'AtTagger',hasEvent:i.hasEvent,type:i.privacy,tag_num:MetaComposerEdDialog.timesTagEduShown,event_tag_num:MetaComposerEdDialog.timesEventTagEduShown},'ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));if(b)Arbiter.subscribe('SelectedPrivacyOption/changed',function(h,i){this._sendEducationRequest({ids:i.tags,from:'WithTagger',hasEvent:i.hasEvent,type:i.privacy,tag_num:MetaComposerEdDialog.timesTagEduShown,event_tag_num:MetaComposerEdDialog.timesEventTagEduShown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));Selector.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(a,b,c){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new AsyncRequest(b);this._async.setData(a).setHandler(c).send();},_updateDialogContext:function(){var a=DOM.scry(document.body,'div.composerAudienceWrapper'),b,c;for(var d=0;d<a.length;d++){b=a[d];c=Vector2.getElementPosition(b);if(b&&c.x>0&&c.y>0){this._dialog.setContext(b);return true;}}return false;},_handler:function(a){var b=a.payload;if(!b||!this._updateDialogContext())return;var c=this._dialog.getContent();DOM.setContent(c,b);ARIA.announce(DOM.getText(c));this._dialog.disableBehavior(LayerDestroyOnHide).show();var d=Parent.byClass(c,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=animation(d);}else this._anim=animation(d).from('opacity',0);this._anim.by('opacity',1).checkpoint().duration(3500).checkpoint().to('opacity',0).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(a,b){if(this._anim){this._anim.stop();this._dialog.hide(false);this._anim=null;}}});
__d("RequiredFormListener",["event-extensions","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Input');Event.listen(document.documentElement,'submit',function(h){var i=h.getTarget().getElementsByTagName('*');for(var j=0;j<i.length;j++)if(i[j].getAttribute('required')&&g.isEmpty(i[j])){i[j].focus();return false;}},Event.Priority.URGENT);});